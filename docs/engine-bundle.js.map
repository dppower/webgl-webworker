{"version":3,"file":"engine-bundle.js","sources":["../build/game-engine/game-object.js","../build/game-engine/vec3.js","../build/game-engine/quaternion.js","../build/game-engine/mat4.js","../build/game-engine/transform.js","../build/game-engine/input-state.js","../build/game-engine/game-engine.js","../node_modules/rxjs/_esm5/util/root.js","../node_modules/rxjs/_esm5/util/isFunction.js","../node_modules/rxjs/_esm5/util/isArray.js","../node_modules/rxjs/_esm5/util/errorObject.js","../node_modules/rxjs/_esm5/util/tryCatch.js","../node_modules/rxjs/_esm5/util/UnsubscriptionError.js","../node_modules/rxjs/_esm5/Subscription.js","../node_modules/rxjs/_esm5/util/isObject.js","../node_modules/rxjs/_esm5/Observer.js","../node_modules/rxjs/_esm5/symbol/rxSubscriber.js","../node_modules/rxjs/_esm5/Subscriber.js","../node_modules/rxjs/_esm5/symbol/observable.js","../node_modules/rxjs/_esm5/util/noop.js","../node_modules/rxjs/_esm5/Observable.js","../node_modules/rxjs/_esm5/util/toSubscriber.js","../node_modules/rxjs/_esm5/util/pipe.js","../node_modules/rxjs/_esm5/util/ObjectUnsubscribedError.js","../node_modules/rxjs/_esm5/SubjectSubscription.js","../node_modules/rxjs/_esm5/Subject.js","../build/game-engine/worker-messenger.js","../build/game-engine/game-state.js","../build/game-engine/game-camera.js","../build/game-engine/main.js"],"sourcesContent":["var GameObject = (function () {\r\n    function GameObject(transform_) {\r\n        this.transform_ = transform_;\r\n        this.isActive = true;\r\n    }\r\n    ;\r\n    GameObject.prototype.update = function (dt) {\r\n        return this.transform_.transform;\r\n    };\r\n    ;\r\n    GameObject.prototype.markInactive = function () {\r\n        this.isActive = false;\r\n    };\r\n    ;\r\n    return GameObject;\r\n}());\r\nexport { GameObject };\r\n;\r\n//# sourceMappingURL=game-object.js.map","var Vec3 = (function () {\r\n    function Vec3(x, y, z) {\r\n        if (x === void 0) { x = 0.0; }\r\n        if (y === void 0) { y = 0.0; }\r\n        if (z === void 0) { z = 0.0; }\r\n        this.vector_ = new Float32Array([x, y, z]);\r\n    }\r\n    ;\r\n    Object.defineProperty(Vec3.prototype, \"x\", {\r\n        get: function () { return this.vector_[0]; },\r\n        set: function (value) { this.vector_[0] = value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Vec3.prototype, \"y\", {\r\n        get: function () { return this.vector_[1]; },\r\n        set: function (value) { this.vector_[1] = value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Vec3.prototype, \"z\", {\r\n        get: function () { return this.vector_[2]; },\r\n        set: function (value) { this.vector_[2] = value; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    ;\r\n    ;\r\n    ;\r\n    Object.defineProperty(Vec3.prototype, \"array\", {\r\n        get: function () { return this.vector_; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Vec3.prototype, \"length\", {\r\n        get: function () {\r\n            return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2) + Math.pow(this.z, 2));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Vec3.dot = function (a, b) {\r\n        return a.x * b.x + a.y * b.y + a.z * b.z;\r\n    };\r\n    ;\r\n    Vec3.cross = function (a, b, out) {\r\n        out.x = (a.y * b.z) - (a.z * b.y);\r\n        out.y = (a.z * b.x) - (a.x * b.z);\r\n        out.z = (a.x * b.y) - (a.y * b.x);\r\n    };\r\n    ;\r\n    Vec3.prototype.normalise = function () {\r\n        var length = this.length;\r\n        if (length > 0) {\r\n            var factor = 1.0 / length;\r\n            Vec3.scale(factor, this, this);\r\n        }\r\n    };\r\n    ;\r\n    Vec3.add = function (a, b, out) {\r\n        out.x = a.x + b.x;\r\n        out.y = a.y + b.y;\r\n        out.z = a.z + b.z;\r\n    };\r\n    ;\r\n    Vec3.subtract = function (a, b, out) {\r\n        out.x = a.x - b.x;\r\n        out.y = a.y - b.y;\r\n        out.z = a.z - b.z;\r\n    };\r\n    ;\r\n    Vec3.scale = function (s, a, out) {\r\n        out.x = a.x * s;\r\n        out.y = a.y * s;\r\n        out.z = a.z * s;\r\n    };\r\n    ;\r\n    Vec3.prototype.copy = function (a) {\r\n        for (var i in this.vector_) {\r\n            this.vector_[i] = a.array[i];\r\n        }\r\n    };\r\n    ;\r\n    return Vec3;\r\n}());\r\nexport { Vec3 };\r\n;\r\n//# sourceMappingURL=vec3.js.map","import { Vec3 } from \"./vec3\";\r\nvar Quaternion = (function () {\r\n    function Quaternion(axis, angle) {\r\n        if (axis === void 0) { axis = new Vec3(); }\r\n        if (angle === void 0) { angle = 0.0; }\r\n        var phi = angle * Math.PI / 360.0;\r\n        this.v_ = new Vec3();\r\n        Vec3.scale(Math.sin(phi), axis, this.v_);\r\n        this.w_ = Math.cos(phi);\r\n    }\r\n    ;\r\n    Object.defineProperty(Quaternion.prototype, \"x\", {\r\n        get: function () {\r\n            return this.v_.x;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Quaternion.prototype, \"y\", {\r\n        get: function () {\r\n            return this.v_.y;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Quaternion.prototype, \"z\", {\r\n        get: function () {\r\n            return this.v_.z;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Quaternion.prototype, \"w\", {\r\n        get: function () {\r\n            return this.w_;\r\n        },\r\n        set: function (value) {\r\n            this.w_ = value;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Quaternion.prototype, \"v\", {\r\n        get: function () {\r\n            return this.v_;\r\n        },\r\n        set: function (v) {\r\n            this.v_.copy(v);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Quaternion.prototype, \"length\", {\r\n        get: function () {\r\n            return Math.sqrt(Math.pow(this.x, 2) + Math.pow(this.y, 2) + Math.pow(this.z, 2) + Math.pow(this.w, 2));\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    ;\r\n    ;\r\n    Quaternion.prototype.conjugate = function () {\r\n        var c = new Quaternion();\r\n        Vec3.scale(-1.0, this.v_, c.v);\r\n        c.w = this.w_;\r\n        return c;\r\n    };\r\n    ;\r\n    Quaternion.prototype.rotate = function (v) {\r\n        var p = new Quaternion();\r\n        p.w = 0.0;\r\n        p.v = v;\r\n        var r = this.multiply(p).multiply(this.conjugate());\r\n        return r;\r\n    };\r\n    ;\r\n    Quaternion.prototype.normalise = function () {\r\n        var factor = 1.0 / this.length;\r\n        Vec3.scale(factor, this.v, this.v);\r\n        this.w *= factor;\r\n    };\r\n    Quaternion.prototype.multiply = function (q) {\r\n        this.normalise();\r\n        q.normalise();\r\n        var r = new Quaternion();\r\n        r.w = this.w * q.w - Vec3.dot(this.v_, q.v);\r\n        var v = new Vec3();\r\n        Vec3.scale(q.w, this.v_, v);\r\n        Vec3.add(r.v, v, r.v);\r\n        Vec3.scale(this.w, q.v, v);\r\n        Vec3.add(r.v, v, r.v);\r\n        Vec3.cross(this.v_, q.v, v);\r\n        Vec3.add(r.v, v, r.v);\r\n        return r;\r\n    };\r\n    ;\r\n    return Quaternion;\r\n}());\r\nexport { Quaternion };\r\n//# sourceMappingURL=quaternion.js.map","var Mat4 = (function () {\r\n    function Mat4() {\r\n        this.matrix_ = new Float32Array(16);\r\n        this.identity();\r\n    }\r\n    ;\r\n    Object.defineProperty(Mat4.prototype, \"array\", {\r\n        get: function () {\r\n            return this.matrix_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Mat4.prototype.identity = function () {\r\n        this.matrix_[0] = 1.0;\r\n        this.matrix_[1] = 0;\r\n        this.matrix_[2] = 0;\r\n        this.matrix_[3] = 0;\r\n        this.matrix_[4] = 0;\r\n        this.matrix_[5] = 1.0;\r\n        this.matrix_[6] = 0;\r\n        this.matrix_[7] = 0;\r\n        this.matrix_[8] = 0;\r\n        this.matrix_[9] = 0;\r\n        this.matrix_[10] = 1.0;\r\n        this.matrix_[11] = 0;\r\n        this.matrix_[12] = 0;\r\n        this.matrix_[13] = 0;\r\n        this.matrix_[14] = 0;\r\n        this.matrix_[15] = 1.0;\r\n    };\r\n    ;\r\n    Mat4.multiply = function (a, b, out) {\r\n        var a11 = a.array[0], a12 = a.array[1], a13 = a.array[2], a14 = a.array[3], a21 = a.array[4], a22 = a.array[5], a23 = a.array[6], a24 = a.array[7], a31 = a.array[8], a32 = a.array[9], a33 = a.array[10], a34 = a.array[11], a41 = a.array[12], a42 = a.array[13], a43 = a.array[14], a44 = a.array[15];\r\n        for (var i = 0; i < 16; i += 4) {\r\n            var b1 = b.array[i], b2 = b.array[i + 1], b3 = b.array[i + 2], b4 = b.array[i + 3];\r\n            out.array[i] = b1 * a11 + b2 * a21 + b3 * a31 + b4 * a41;\r\n            out.array[i + 1] = b1 * a12 + b2 * a22 + b3 * a32 + b4 * a42;\r\n            out.array[i + 2] = b1 * a13 + b2 * a23 + b3 * a33 + b4 * a43;\r\n            out.array[i + 3] = b1 * a14 + b2 * a24 + b3 * a34 + b4 * a44;\r\n        }\r\n    };\r\n    ;\r\n    Mat4.prototype.rotate = function (q) {\r\n        var r = new Mat4();\r\n        q.normalise();\r\n        var n = 2.0;\r\n        var wx = n * q.w * q.x;\r\n        var wy = n * q.w * q.y;\r\n        var wz = n * q.w * q.z;\r\n        var xx = n * q.x * q.x;\r\n        var yy = n * q.y * q.y;\r\n        var zz = n * q.z * q.z;\r\n        var xy = n * q.x * q.y;\r\n        var xz = n * q.x * q.z;\r\n        var yz = n * q.y * q.z;\r\n        r.array[0] = 1.0 - (yy + zz);\r\n        r.array[1] = xy + wz;\r\n        r.array[2] = xz - wy;\r\n        r.array[4] = xy - wz;\r\n        r.array[5] = 1.0 - (xx + zz);\r\n        r.array[6] = yz + wx;\r\n        r.array[8] = xz + wy;\r\n        r.array[9] = yz - wx;\r\n        r.array[10] = 1.0 - (xx + yy);\r\n        Mat4.multiply(this, r, this);\r\n    };\r\n    ;\r\n    Mat4.prototype.scale = function (v) {\r\n        var s = new Mat4();\r\n        s.array[0] = v.x;\r\n        s.array[5] = v.y;\r\n        s.array[10] = v.z;\r\n        Mat4.multiply(this, s, this);\r\n    };\r\n    ;\r\n    Mat4.prototype.translate = function (v) {\r\n        var t = new Mat4();\r\n        t.array[12] = v.x;\r\n        t.array[13] = v.y;\r\n        t.array[14] = v.z;\r\n        Mat4.multiply(this, t, this);\r\n    };\r\n    ;\r\n    return Mat4;\r\n}());\r\nexport { Mat4 };\r\n;\r\n//# sourceMappingURL=mat4.js.map","import { Vec3 } from \"./vec3\";\r\nimport { Quaternion } from \"./quaternion\";\r\nimport { Mat4 } from \"./mat4\";\r\nvar Transform = (function () {\r\n    function Transform(position_, scale_, orientation_) {\r\n        if (position_ === void 0) { position_ = new Vec3(); }\r\n        if (scale_ === void 0) { scale_ = new Vec3(1.0, 1.0, 1.0); }\r\n        if (orientation_ === void 0) { orientation_ = new Quaternion(); }\r\n        this.position_ = position_;\r\n        this.scale_ = scale_;\r\n        this.orientation_ = orientation_;\r\n        this.transform_ = new Mat4();\r\n    }\r\n    Object.defineProperty(Transform.prototype, \"transform\", {\r\n        get: function () {\r\n            this.transform_.identity();\r\n            this.transform_.rotate(this.orientation_);\r\n            this.transform_.translate(this.position_);\r\n            this.transform_.scale(this.scale_);\r\n            return this.transform_.array;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Transform.prototype.scale = function (v) {\r\n        this.scale_.copy(v);\r\n    };\r\n    ;\r\n    Transform.prototype.translate = function (v) {\r\n        Vec3.add(this.position_, v, this.position_);\r\n    };\r\n    ;\r\n    Transform.prototype.rotate = function (vec, angle) {\r\n        var q = new Quaternion(vec, angle);\r\n        var r = this.orientation_.multiply(q);\r\n        this.orientation_ = r;\r\n    };\r\n    ;\r\n    ;\r\n    return Transform;\r\n}());\r\nexport { Transform };\r\n;\r\n//# sourceMappingURL=transform.js.map","var InputState = (function () {\r\n    function InputState() {\r\n        this.aspect = 1.4;\r\n        this.zoom = 0.0;\r\n        this.mouseDx = 0.0;\r\n        this.mouseDy = 0.0;\r\n        this.keyDown = [];\r\n        this.keyPressed = [];\r\n    }\r\n    return InputState;\r\n}());\r\nexport { InputState };\r\n;\r\n//# sourceMappingURL=input-state.js.map","import { GameObject } from \"./game-object\";\r\nimport { Transform } from \"./transform\";\r\nimport { InputState } from \"./input-state\";\r\nvar GameEngine = (function () {\r\n    function GameEngine(messenger_, gameState_) {\r\n        var _this = this;\r\n        this.messenger_ = messenger_;\r\n        this.gameState_ = gameState_;\r\n        this.current_inputs_ = new InputState();\r\n        this.inputs_subscription = this.messenger_.getInputs().subscribe(function (inputs) {\r\n            _this.current_inputs_ = inputs;\r\n        });\r\n    }\r\n    ;\r\n    GameEngine.prototype.Start = function () {\r\n        var testObject = new GameObject(new Transform());\r\n        this.gameState_.addNewObject(testObject);\r\n    };\r\n    ;\r\n    GameEngine.prototype.Update = function (dt) {\r\n        var state = this.gameState_.updateObjects(dt, this.current_inputs_);\r\n        this.messenger_.pushChanges(state);\r\n    };\r\n    ;\r\n    GameEngine.prototype.dispose = function () {\r\n        this.inputs_subscription.unsubscribe();\r\n    };\r\n    ;\r\n    return GameEngine;\r\n}());\r\nexport { GameEngine };\r\n;\r\n//# sourceMappingURL=game-engine.js.map","// CommonJS / Node have global context exposed as \"global\" variable.\n// We don't want to include the whole node.d.ts this this compilation unit so we'll just fake\n// the global \"global\" var for now.\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar __window = typeof window !== 'undefined' && window;\nvar __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&\n    self instanceof WorkerGlobalScope && self;\nvar __global = typeof global !== 'undefined' && global;\nvar _root = __window || __global || __self;\n// Workaround Closure Compiler restriction: The body of a goog.module cannot use throw.\n// This is needed when used with angular/tsickle which inserts a goog.module statement.\n// Wrap in IIFE\n/*@__PURE__*/ (function () {\n    if (!_root) {\n        throw new Error('RxJS could not find any global context (window, self, global)');\n    }\n})();\nexport { _root as root };\n//# sourceMappingURL=root.js.map \n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map \n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });\n//# sourceMappingURL=isArray.js.map \n","// typeof any so that it we don't have to cast when comparing a result to the error object\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var errorObject = { e: {} };\n//# sourceMappingURL=errorObject.js.map \n","/** PURE_IMPORTS_START ._errorObject PURE_IMPORTS_END */\nimport { errorObject } from './errorObject';\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    }\n    catch (e) {\n        errorObject.e = e;\n        return errorObject;\n    }\n}\nexport function tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n;\n//# sourceMappingURL=tryCatch.js.map \n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when one or more errors have occurred during the\n * `unsubscribe` of a {@link Subscription}.\n */\nexport var UnsubscriptionError = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(UnsubscriptionError, _super);\n    function UnsubscriptionError(errors) {\n        _super.call(this);\n        this.errors = errors;\n        var err = Error.call(this, errors ?\n            errors.length + \" errors occurred during unsubscription:\\n  \" + errors.map(function (err, i) { return ((i + 1) + \") \" + err.toString()); }).join('\\n  ') : '');\n        this.name = err.name = 'UnsubscriptionError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return UnsubscriptionError;\n}(Error));\n//# sourceMappingURL=UnsubscriptionError.js.map \n","/** PURE_IMPORTS_START ._util_isArray,._util_isObject,._util_isFunction,._util_tryCatch,._util_errorObject,._util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { tryCatch } from './util/tryCatch';\nimport { errorObject } from './util/errorObject';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\n/**\n * Represents a disposable resource, such as the execution of an Observable. A\n * Subscription has one important method, `unsubscribe`, that takes no argument\n * and just disposes the resource held by the subscription.\n *\n * Additionally, subscriptions may be grouped together through the `add()`\n * method, which will attach a child Subscription to the current Subscription.\n * When a Subscription is unsubscribed, all its children (and its grandchildren)\n * will be unsubscribed as well.\n *\n * @class Subscription\n */\nexport var Subscription = /*@__PURE__*/ (/*@__PURE__*/ function () {\n    /**\n     * @param {function(): void} [unsubscribe] A function describing how to\n     * perform the disposal of resources when the `unsubscribe` method is called.\n     */\n    function Subscription(unsubscribe) {\n        /**\n         * A flag to indicate whether this Subscription has already been unsubscribed.\n         * @type {boolean}\n         */\n        this.closed = false;\n        this._parent = null;\n        this._parents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    /**\n     * Disposes the resources held by the subscription. May, for instance, cancel\n     * an ongoing Observable execution or cancel any other type of work that\n     * started when the Subscription was created.\n     * @return {void}\n     */\n    Subscription.prototype.unsubscribe = function () {\n        var hasErrors = false;\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parent = null;\n        this._parents = null;\n        // null out _subscriptions first so any child subscriptions that attempt\n        // to remove themselves from this subscription will noop\n        this._subscriptions = null;\n        var index = -1;\n        var len = _parents ? _parents.length : 0;\n        // if this._parent is null, then so is this._parents, and we\n        // don't have to remove ourselves from any parent subscriptions.\n        while (_parent) {\n            _parent.remove(this);\n            // if this._parents is null or index >= len,\n            // then _parent is set to null, and the loop exits\n            _parent = ++index < len && _parents[index] || null;\n        }\n        if (isFunction(_unsubscribe)) {\n            var trial = tryCatch(_unsubscribe).call(this);\n            if (trial === errorObject) {\n                hasErrors = true;\n                errors = errors || (errorObject.e instanceof UnsubscriptionError ?\n                    flattenUnsubscriptionErrors(errorObject.e.errors) : [errorObject.e]);\n            }\n        }\n        if (isArray(_subscriptions)) {\n            index = -1;\n            len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    var trial = tryCatch(sub.unsubscribe).call(sub);\n                    if (trial === errorObject) {\n                        hasErrors = true;\n                        errors = errors || [];\n                        var err = errorObject.e;\n                        if (err instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));\n                        }\n                        else {\n                            errors.push(err);\n                        }\n                    }\n                }\n            }\n        }\n        if (hasErrors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    /**\n     * Adds a tear down to be called during the unsubscribe() of this\n     * Subscription.\n     *\n     * If the tear down being added is a subscription that is already\n     * unsubscribed, is the same reference `add` is being called on, or is\n     * `Subscription.EMPTY`, it will not be added.\n     *\n     * If this subscription is already in an `closed` state, the passed\n     * tear down logic will be executed immediately.\n     *\n     * @param {TeardownLogic} teardown The additional logic to execute on\n     * teardown.\n     * @return {Subscription} Returns the Subscription used or created to be\n     * added to the inner subscriptions list. This Subscription can be used with\n     * `remove()` to remove the passed teardown logic from the inner subscriptions\n     * list.\n     */\n    Subscription.prototype.add = function (teardown) {\n        if (!teardown || (teardown === Subscription.EMPTY)) {\n            return Subscription.EMPTY;\n        }\n        if (teardown === this) {\n            return this;\n        }\n        var subscription = teardown;\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (typeof subscription._addParent !== 'function' /* quack quack */) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default:\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n        }\n        var subscriptions = this._subscriptions || (this._subscriptions = []);\n        subscriptions.push(subscription);\n        subscription._addParent(this);\n        return subscription;\n    };\n    /**\n     * Removes a Subscription from the internal list of subscriptions that will\n     * unsubscribe during the unsubscribe process of this Subscription.\n     * @param {Subscription} subscription The subscription to remove.\n     * @return {void}\n     */\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        if (!_parent || _parent === parent) {\n            // If we don't have a parent, or the new parent is the same as the\n            // current parent, then set this._parent to the new parent.\n            this._parent = parent;\n        }\n        else if (!_parents) {\n            // If there's already one parent, but not multiple, allocate an Array to\n            // store the rest of the parent Subscriptions.\n            this._parents = [parent];\n        }\n        else if (_parents.indexOf(parent) === -1) {\n            // Only add the new parent to the _parents list if it's not already there.\n            _parents.push(parent);\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map \n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x != null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map \n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) { throw err; },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map \n","/** PURE_IMPORTS_START .._util_root PURE_IMPORTS_END */\nimport { root } from '../util/root';\nvar Symbol = root.Symbol;\nexport var rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function') ?\n    /*@__PURE__*/ Symbol.for('rxSubscriber') : '@@rxSubscriber';\n/**\n * @deprecated use rxSubscriber instead\n */\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map \n","/** PURE_IMPORTS_START ._util_isFunction,._Subscription,._Observer,._symbol_rxSubscriber PURE_IMPORTS_END */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nimport { isFunction } from './util/isFunction';\nimport { Subscription } from './Subscription';\nimport { empty as emptyObserver } from './Observer';\nimport { rxSubscriber as rxSubscriberSymbol } from './symbol/rxSubscriber';\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport var Subscriber = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(Subscriber, _super);\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    function Subscriber(destinationOrNext, error, complete) {\n        _super.call(this);\n        this.syncErrorValue = null;\n        this.syncErrorThrown = false;\n        this.syncErrorThrowable = false;\n        this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        this.destination = destinationOrNext;\n                        this.destination.add(this);\n                    }\n                    else {\n                        this.syncErrorThrowable = true;\n                        this.destination = new SafeSubscriber(this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                this.syncErrorThrowable = true;\n                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);\n                break;\n        }\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     */\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _a = this, _parent = _a._parent, _parents = _a._parents;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar SafeSubscriber = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        _super.call(this);\n        this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = this.unsubscribe.bind(this);\n            }\n        }\n        this._context = context;\n        this._next = next;\n        this._error = error;\n        this._complete = complete;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._error) {\n                if (!_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                throw err;\n            }\n            else {\n                _parentSubscriber.syncErrorValue = err;\n                _parentSubscriber.syncErrorThrown = true;\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            throw err;\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            parent.syncErrorValue = err;\n            parent.syncErrorThrown = true;\n            return true;\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\n//# sourceMappingURL=Subscriber.js.map \n","/** PURE_IMPORTS_START .._util_root PURE_IMPORTS_END */\nimport { root } from '../util/root';\nexport function getSymbolObservable(context) {\n    var $$observable;\n    var Symbol = context.Symbol;\n    if (typeof Symbol === 'function') {\n        if (Symbol.observable) {\n            $$observable = Symbol.observable;\n        }\n        else {\n            $$observable = Symbol('observable');\n            Symbol.observable = $$observable;\n        }\n    }\n    else {\n        $$observable = '@@observable';\n    }\n    return $$observable;\n}\nexport var observable = /*@__PURE__*/ getSymbolObservable(root);\n/**\n * @deprecated use observable instead\n */\nexport var $$observable = observable;\n//# sourceMappingURL=observable.js.map \n","/* tslint:disable:no-empty */\n/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map \n","/** PURE_IMPORTS_START ._util_root,._util_toSubscriber,._symbol_observable,._util_pipe PURE_IMPORTS_END */\nimport { root } from './util/root';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\n/**\n * A representation of any set of values over any amount of time. This is the most basic building block\n * of RxJS.\n *\n * @class Observable<T>\n */\nexport var Observable = /*@__PURE__*/ (/*@__PURE__*/ function () {\n    /**\n     * @constructor\n     * @param {Function} subscribe the function that is called when the Observable is\n     * initially subscribed to. This function is given a Subscriber, to which new values\n     * can be `next`ed, or an `error` method can be called to raise an error, or\n     * `complete` can be called to notify of a successful completion.\n     */\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    /**\n     * Creates a new Observable, with this Observable as the source, and the passed\n     * operator defined as the new observable's operator.\n     * @method lift\n     * @param {Operator} operator the operator defining the operation to take on the observable\n     * @return {Observable} a new observable with the Operator applied\n     */\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    /**\n     * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.\n     *\n     * <span class=\"informal\">Use it when you have all these Observables, but still nothing is happening.</span>\n     *\n     * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It\n     * might be for example a function that you passed to a {@link create} static factory, but most of the time it is\n     * a library implementation, which defines what and when will be emitted by an Observable. This means that calling\n     * `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often\n     * thought.\n     *\n     * Apart from starting the execution of an Observable, this method allows you to listen for values\n     * that an Observable emits, as well as for when it completes or errors. You can achieve this in two\n     * following ways.\n     *\n     * The first way is creating an object that implements {@link Observer} interface. It should have methods\n     * defined by that interface, but note that it should be just a regular JavaScript object, which you can create\n     * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do\n     * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also\n     * that your object does not have to implement all methods. If you find yourself creating a method that doesn't\n     * do anything, you can simply omit it. Note however, that if `error` method is not provided, all errors will\n     * be left uncaught.\n     *\n     * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.\n     * This means you can provide three functions as arguments to `subscribe`, where first function is equivalent\n     * of a `next` method, second of an `error` method and third of a `complete` method. Just as in case of Observer,\n     * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,\n     * since `subscribe` recognizes these functions by where they were placed in function call. When it comes\n     * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.\n     *\n     * Whatever style of calling `subscribe` you use, in both cases it returns a Subscription object.\n     * This object allows you to call `unsubscribe` on it, which in turn will stop work that an Observable does and will clean\n     * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback\n     * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.\n     *\n     * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.\n     * It is an Observable itself that decides when these functions will be called. For example {@link of}\n     * by default emits all its values synchronously. Always check documentation for how given Observable\n     * will behave when subscribed and if its default behavior can be modified with a {@link Scheduler}.\n     *\n     * @example <caption>Subscribe with an Observer</caption>\n     * const sumObserver = {\n     *   sum: 0,\n     *   next(value) {\n     *     console.log('Adding: ' + value);\n     *     this.sum = this.sum + value;\n     *   },\n     *   error() { // We actually could just remove this method,\n     *   },        // since we do not really care about errors right now.\n     *   complete() {\n     *     console.log('Sum equals: ' + this.sum);\n     *   }\n     * };\n     *\n     * Rx.Observable.of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.\n     * .subscribe(sumObserver);\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Subscribe with functions</caption>\n     * let sum = 0;\n     *\n     * Rx.Observable.of(1, 2, 3)\n     * .subscribe(\n     *   function(value) {\n     *     console.log('Adding: ' + value);\n     *     sum = sum + value;\n     *   },\n     *   undefined,\n     *   function() {\n     *     console.log('Sum equals: ' + sum);\n     *   }\n     * );\n     *\n     * // Logs:\n     * // \"Adding: 1\"\n     * // \"Adding: 2\"\n     * // \"Adding: 3\"\n     * // \"Sum equals: 6\"\n     *\n     *\n     * @example <caption>Cancel a subscription</caption>\n     * const subscription = Rx.Observable.interval(1000).subscribe(\n     *   num => console.log(num),\n     *   undefined,\n     *   () => console.log('completed!') // Will not be called, even\n     * );                                // when cancelling subscription\n     *\n     *\n     * setTimeout(() => {\n     *   subscription.unsubscribe();\n     *   console.log('unsubscribed!');\n     * }, 2500);\n     *\n     * // Logs:\n     * // 0 after 1s\n     * // 1 after 2s\n     * // \"unsubscribed!\" after 2.5s\n     *\n     *\n     * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,\n     *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed\n     *  Observable.\n     * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,\n     *  the error will be thrown as unhandled.\n     * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.\n     * @return {ISubscription} a subscription reference to the registered handlers\n     * @method subscribe\n     */\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            operator.call(sink, this.source);\n        }\n        else {\n            sink.add(this.source || !sink.syncErrorThrowable ? this._subscribe(sink) : this._trySubscribe(sink));\n        }\n        if (sink.syncErrorThrowable) {\n            sink.syncErrorThrowable = false;\n            if (sink.syncErrorThrown) {\n                throw sink.syncErrorValue;\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            sink.syncErrorThrown = true;\n            sink.syncErrorValue = err;\n            sink.error(err);\n        }\n    };\n    /**\n     * @method forEach\n     * @param {Function} next a handler for each value emitted by the observable\n     * @param {PromiseConstructor} [PromiseCtor] a constructor function used to instantiate the Promise\n     * @return {Promise} a promise that either resolves on observable completion or\n     *  rejects with the handled error\n     */\n    Observable.prototype.forEach = function (next, PromiseCtor) {\n        var _this = this;\n        if (!PromiseCtor) {\n            if (root.Rx && root.Rx.config && root.Rx.config.Promise) {\n                PromiseCtor = root.Rx.config.Promise;\n            }\n            else if (root.Promise) {\n                PromiseCtor = root.Promise;\n            }\n        }\n        if (!PromiseCtor) {\n            throw new Error('no Promise impl found');\n        }\n        return new PromiseCtor(function (resolve, reject) {\n            // Must be declared in a separate statement to avoid a RefernceError when\n            // accessing subscription below in the closure due to Temporal Dead Zone.\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                if (subscription) {\n                    // if there is a subscription, then we can surmise\n                    // the next handling is asynchronous. Any errors thrown\n                    // need to be rejected explicitly and unsubscribe must be\n                    // called manually\n                    try {\n                        next(value);\n                    }\n                    catch (err) {\n                        reject(err);\n                        subscription.unsubscribe();\n                    }\n                }\n                else {\n                    // if there is NO subscription, then we're getting a nexted\n                    // value synchronously during subscription. We can just call it.\n                    // If it errors, Observable's `subscribe` will ensure the\n                    // unsubscription logic is called, then synchronously rethrow the error.\n                    // After that, Promise will trap the error and send it\n                    // down the rejection path.\n                    next(value);\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        return this.source.subscribe(subscriber);\n    };\n    /**\n     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable\n     * @method Symbol.observable\n     * @return {Observable} this instance of the observable\n     */\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    /* tslint:enable:max-line-length */\n    /**\n     * Used to stitch together functional operators into a chain.\n     * @method pipe\n     * @return {Observable} the Observable result of all of the operators having\n     * been called in the order they were passed in.\n     *\n     * @example\n     *\n     * import { map, filter, scan } from 'rxjs/operators';\n     *\n     * Rx.Observable.interval(1000)\n     *   .pipe(\n     *     filter(x => x % 2 === 0),\n     *     map(x => x + x),\n     *     scan((acc, x) => acc + x)\n     *   )\n     *   .subscribe(x => console.log(x))\n     */\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i - 0] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    /* tslint:enable:max-line-length */\n    Observable.prototype.toPromise = function (PromiseCtor) {\n        var _this = this;\n        if (!PromiseCtor) {\n            if (root.Rx && root.Rx.config && root.Rx.config.Promise) {\n                PromiseCtor = root.Rx.config.Promise;\n            }\n            else if (root.Promise) {\n                PromiseCtor = root.Promise;\n            }\n        }\n        if (!PromiseCtor) {\n            throw new Error('no Promise impl found');\n        }\n        return new PromiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    // HACK: Since TypeScript inherits static properties too, we have to\n    // fight against TypeScript here so Subject can have a different static create signature\n    /**\n     * Creates a new cold Observable by calling the Observable constructor\n     * @static true\n     * @owner Observable\n     * @method create\n     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor\n     * @return {Observable} a new cold observable\n     */\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\n//# sourceMappingURL=Observable.js.map \n","/** PURE_IMPORTS_START .._Subscriber,.._symbol_rxSubscriber,.._Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map \n","/** PURE_IMPORTS_START ._noop PURE_IMPORTS_END */\nimport { noop } from './noop';\n/* tslint:enable:max-line-length */\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i - 0] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\n/* @internal */\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map \n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when an action is invalid because the object has been\n * unsubscribed.\n *\n * @see {@link Subject}\n * @see {@link BehaviorSubject}\n *\n * @class ObjectUnsubscribedError\n */\nexport var ObjectUnsubscribedError = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(ObjectUnsubscribedError, _super);\n    function ObjectUnsubscribedError() {\n        var err = _super.call(this, 'object unsubscribed');\n        this.name = err.name = 'ObjectUnsubscribedError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return ObjectUnsubscribedError;\n}(Error));\n//# sourceMappingURL=ObjectUnsubscribedError.js.map \n","/** PURE_IMPORTS_START ._Subscription PURE_IMPORTS_END */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nimport { Subscription } from './Subscription';\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nexport var SubjectSubscription = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        _super.call(this);\n        this.subject = subject;\n        this.subscriber = subscriber;\n        this.closed = false;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\n//# sourceMappingURL=SubjectSubscription.js.map \n","/** PURE_IMPORTS_START ._Observable,._Subscriber,._Subscription,._util_ObjectUnsubscribedError,._SubjectSubscription,._symbol_rxSubscriber PURE_IMPORTS_END */\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b)\n        if (b.hasOwnProperty(p))\n            d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from './symbol/rxSubscriber';\n/**\n * @class SubjectSubscriber<T>\n */\nexport var SubjectSubscriber = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        _super.call(this, destination);\n        this.destination = destination;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\n/**\n * @class Subject<T>\n */\nexport var Subject = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(Subject, _super);\n    function Subject() {\n        _super.call(this);\n        this.observers = [];\n        this.closed = false;\n        this.isStopped = false;\n        this.hasError = false;\n        this.thrownError = null;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\n/**\n * @class AnonymousSubject<T>\n */\nexport var AnonymousSubject = /*@__PURE__*/ (/*@__PURE__*/ function (_super) {\n    __extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        _super.call(this);\n        this.destination = destination;\n        this.source = source;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\n//# sourceMappingURL=Subject.js.map \n","import { Subject } from \"rxjs/Subject\";\r\nvar WorkerMessenger = (function () {\r\n    function WorkerMessenger() {\r\n        var _this = this;\r\n        this.input_changes_ = new Subject();\r\n        this.model_changes_ = new Subject();\r\n        this.handleMessages = function (event) {\r\n            _this.input_changes_.next(event.data);\r\n        };\r\n        addEventListener(\"message\", this.handleMessages);\r\n        this.model_changes_subscription_ = this.model_changes_.subscribe(function (data) {\r\n            postMessage(data, [data]);\r\n        });\r\n    }\r\n    ;\r\n    WorkerMessenger.prototype.dispose = function () {\r\n        removeEventListener(\"message\", this.handleMessages);\r\n        this.model_changes_.complete();\r\n        this.input_changes_.complete();\r\n        this.model_changes_subscription_.unsubscribe();\r\n    };\r\n    ;\r\n    WorkerMessenger.prototype.pushChanges = function (buffer) {\r\n        this.model_changes_.next(buffer);\r\n    };\r\n    ;\r\n    WorkerMessenger.prototype.getInputs = function () {\r\n        return this.input_changes_.asObservable();\r\n    };\r\n    ;\r\n    return WorkerMessenger;\r\n}());\r\nexport { WorkerMessenger };\r\n;\r\n//# sourceMappingURL=worker-messenger.js.map","var GameState = (function () {\r\n    function GameState(camera_) {\r\n        this.camera_ = camera_;\r\n        this.gameObjects_ = [];\r\n    }\r\n    ;\r\n    GameState.prototype.addNewObject = function (object) {\r\n        this.gameObjects_.push(object);\r\n    };\r\n    ;\r\n    GameState.prototype.removeObject = function (index) {\r\n    };\r\n    ;\r\n    GameState.prototype.updateObjects = function (dt, inputs) {\r\n        var bufferLength = (this.gameObjects_.length + 2) * 16 * 4;\r\n        var buffer = new ArrayBuffer(bufferLength);\r\n        var view = new Float32Array(buffer, 0, 16);\r\n        var projection = new Float32Array(buffer, 64, 16);\r\n        this.camera_.update(inputs.zoom, inputs.aspect);\r\n        view.set(this.camera_.view);\r\n        projection.set(this.camera_.projection);\r\n        this.gameObjects_.forEach(function (object, i, array) {\r\n            var matrix = new Float32Array(buffer, (i + 2) * 64, 16);\r\n            matrix.set(object.update(dt));\r\n        });\r\n        return buffer;\r\n    };\r\n    ;\r\n    return GameState;\r\n}());\r\nexport { GameState };\r\n//# sourceMappingURL=game-state.js.map","import { Transform } from \"./transform\";\r\nimport { Vec3 } from \"./vec3\";\r\nvar Camera = (function () {\r\n    function Camera() {\r\n        this.minZoom = -3.0;\r\n        this.maxZoom = -4.0;\r\n        this.zoomSpeed = 0.2;\r\n        this.near_ = 0.1;\r\n        this.far_ = 100.0;\r\n        this.pMatrix_ = new Float32Array(16);\r\n        this.vMatrix_ = new Float32Array(16);\r\n        this.vFieldOfView_ = 60.0 * Math.PI / 180;\r\n        this.transform_ = new Transform();\r\n        var transform = new Vec3(0.0, 0.0, -3.5);\r\n        this.transform_.translate(transform);\r\n        this.vMatrix_ = this.transform_.transform;\r\n    }\r\n    ;\r\n    Object.defineProperty(Camera.prototype, \"view\", {\r\n        get: function () {\r\n            return this.vMatrix_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Object.defineProperty(Camera.prototype, \"projection\", {\r\n        get: function () {\r\n            this.calculateFrustrum();\r\n            return this.pMatrix_;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ;\r\n    Camera.prototype.update = function (direction, aspect) {\r\n        var zoom = direction * this.zoomSpeed;\r\n        var currentPosition = this.vMatrix_[14];\r\n        zoom = (zoom + currentPosition <= this.minZoom) ? 0.0 : ((zoom + currentPosition >= this.maxZoom) ? 0.0 : zoom);\r\n        var transform = new Vec3(0.0, 0.0, zoom);\r\n        this.transform_.translate(transform);\r\n        this.vMatrix_ = this.transform_.transform;\r\n        this.aspect_ = aspect;\r\n    };\r\n    ;\r\n    Camera.prototype.calculateFrustrum = function () {\r\n        var f = Math.tan(0.5 * (Math.PI - this.vFieldOfView_));\r\n        var depth = 1.0 / (this.near_ - this.far_);\r\n        this.pMatrix_[0] = f / this.aspect_;\r\n        this.pMatrix_[5] = f;\r\n        this.pMatrix_[10] = (this.near_ + this.far_) * depth;\r\n        this.pMatrix_[11] = -1.0;\r\n        this.pMatrix_[14] = 2.0 * (this.near_ * this.far_) * depth;\r\n    };\r\n    ;\r\n    return Camera;\r\n}());\r\nexport { Camera };\r\n//# sourceMappingURL=game-camera.js.map","import { GameEngine } from \"./game-engine\";\r\nimport { WorkerMessenger } from \"./worker-messenger\";\r\nimport { GameState } from \"./game-state\";\r\nimport { Camera } from \"./game-camera\";\r\nvar messenger = new WorkerMessenger();\r\nvar camera = new Camera();\r\nvar gameState = new GameState(camera);\r\nvar engine = new GameEngine(messenger, gameState);\r\n(function () {\r\n    engine.Start();\r\n    var dt = 1000 / 60;\r\n    var Update = function () {\r\n        setInterval(Update, dt);\r\n        engine.Update(dt);\r\n    };\r\n    Update();\r\n})();\r\n//# sourceMappingURL=main.js.map"],"names":["GameObject","transform_","this","isActive","prototype","update","dt","transform","markInactive","Vec3","x","y","z","vector_","Float32Array","Object","defineProperty","get","set","value","enumerable","configurable","Math","sqrt","pow","dot","a","b","cross","out","normalise","length","factor","scale","add","subtract","s","copy","i","array","Quaternion","axis","angle","phi","PI","v_","sin","w_","cos","v","w","conjugate","c","rotate","p","multiply","q","r","Mat4","matrix_","identity","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b1","b2","b3","b4","wx","wy","wz","xx","yy","zz","xy","xz","yz","translate","t","Transform","position_","scale_","orientation_","vec","InputState","aspect","zoom","mouseDx","mouseDy","keyDown","keyPressed","GameEngine","messenger_","gameState_","_this","current_inputs_","inputs_subscription","getInputs","subscribe","inputs","Start","testObject","addNewObject","Update","state","updateObjects","pushChanges","dispose","unsubscribe","__window","window","__self","self","WorkerGlobalScope","__global","global","_root","isFunction","isArray","Array","tryCatchTarget","errorObject","e","tryCatcher","apply","arguments","tryCatch","fn","__extends","d","hasOwnProperty","__","constructor","create","UnsubscriptionError","_super","errors","call","err","Error","map","toString","join","name","stack","message","Subscription","closed","_parent","_parents","_subscriptions","_unsubscribe","empty","hasErrors","index","len","remove","flattenUnsubscriptionErrors","sub","concat","push","teardown","EMPTY","subscription","_addParent","tmp","subscriptions","subscriptionIndex","indexOf","splice","parent","reduce","errs","next","error","complete","Symbol","root","rxSubscriber","for","Subscriber","destinationOrNext","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","destination","emptyObserver","SafeSubscriber","rxSubscriberSymbol","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","_parentSubscriber","observerOrNext","context","bind","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","observable","$$observable","getSymbolObservable","noop","Observable","_isScalar","_subscribe","lift","operator","source","sink","nextOrObserver","toSubscriber","_trySubscribe","forEach","PromiseCtor","Rx","config","Promise","resolve","reject","Symbol_observable","pipe","fns","operations","_i","input","prev","toPromise","ObjectUnsubscribedError","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","AnonymousSubject","slice","asObservable","WorkerMessenger","input_changes_","model_changes_","handleMessages","event","data","addEventListener","model_changes_subscription_","postMessage","removeEventListener","buffer","GameState","camera_","gameObjects_","object","removeObject","bufferLength","ArrayBuffer","view","projection","Camera","minZoom","maxZoom","zoomSpeed","near_","far_","pMatrix_","vMatrix_","vFieldOfView_","calculateFrustrum","direction","currentPosition","aspect_","f","tan","depth","engine","setInterval"],"mappings":"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"}